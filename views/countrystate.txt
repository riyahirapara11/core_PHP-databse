The issue you're encountering is due to the fact that you're storing the `country_id` (which is just the ID of the country) in the database, but you want to store the actual `country_name` and `state_name` in the `users` table instead of just their IDs.

Here’s what needs to be done:

### 1. **Store the country and state names in the database**
Instead of storing the country ID and state ID, you need to store the `country_name` and `state_name` in the `users` table. This means that when you insert data into the database, you need to use the names of the selected country and state, not just their IDs.

### 2. **Modify the SQL query**
You’re currently doing something like this:
```php
$countryList[$country]
```
Which stores the country as an ID or shorthand (`'1' => 'india'`).

Instead, you want to store the actual **name** of the country and state in the database, which can be done by fetching the name from your `countries` and `states` tables.

### 3. **Get the Country and State Names**
Since you're using the country ID to fetch the country name, and the state ID to fetch the state name, you need to modify your query and form submission logic to fetch these names.

Here’s how you can modify your code to store the names:

### Modify Your PHP Logic:

```php
// Assuming $country is the country ID
$countryQuery = "SELECT name FROM countries WHERE id = '$country'";
$countryResult = $connection->query($countryQuery);
$countryName = $countryResult->fetch_assoc()['name'];  // Get country name

// Assuming $state is the state ID (which should correspond to the state ID of the selected country)
$stateQuery = "SELECT name FROM states WHERE id = '$state' AND country_id = '$country'";
$stateResult = $connection->query($stateQuery);
$stateName = $stateResult->fetch_assoc()['name'];  // Get state name

// Now, insert the country name and state name into the database
$sql = "INSERT INTO `users` (`first_name`, `last_name`, `email`, `phone_no`, `address`, `country`, `state`, `pincode`, `password`) 
        VALUES ('$firstName', '$lastName', '$email', '$phoneNo', '$address', '$countryName', '$stateName', '$pincode', '$hashedPassword')";
```

### Explanation:
1. **Get Country Name**: Before executing your `INSERT` query, you fetch the actual country name using the `$country` ID (`$countryName`).
2. **Get State Name**: Similarly, you fetch the state name from the `states` table using the selected `state` ID (`$stateName`).

### 4. **Ensure the State is Not Disabled**
The reason the state dropdown has the `disabled` attribute might be because you’re not properly updating the state options when the country is selected.

Make sure that when the country is selected, the state dropdown is populated correctly. In your JavaScript code, after the country is selected, ensure that you're enabling the state dropdown:

```javascript
document.addEventListener('DOMContentLoaded', function() {
    const countrySelect = document.getElementById('country');
    const stateSelect = document.getElementById('state');
    
    fetch('http://localhost/php/views/registration.php?action=getCountries')
        .then(response => response.json())
        .then(countries => {
            countries.forEach(country => {
                const option = document.createElement('option');
                option.value = country.id;
                option.textContent = country.name;
                countrySelect.appendChild(option);
            });
        });

    countrySelect.addEventListener('change', function() {
        const countryId = this.value;
        stateSelect.innerHTML = '<option value="">Select State</option>';
        stateSelect.disabled = false;  // Enable the state dropdown once a country is selected

        if (countryId) {
            fetchStates(countryId);
        }
    });

    function fetchStates(countryId) {
        fetch(`http://localhost/php/views/registration.php?action=getStates&country_id=${countryId}`)
            .then(response => response.json())
            .then(states => {
                states.forEach(state => {
                    const option = document.createElement('option');
                    option.value = state.id;  // Store the state ID, but show the name
                    option.textContent = state.name;
                    stateSelect.appendChild(option);
                });
            })
            .catch(error => console.error('Error fetching states:', error));
    }
});
```

In this modification:
- **Enable the State Dropdown**: When the country is selected, the state dropdown is enabled (`stateSelect.disabled = false`), allowing the user to choose a state.
- **Populate the States**: The `fetchStates` function will now populate the state dropdown with the state names.

### Final Notes:
1. Ensure that your `country_id` and `state_id` are stored in your `states` table properly (with foreign keys to the `countries` table).
2. The main change is ensuring that you fetch the actual **names** of the country and state when inserting data into the `users` table, instead of just inserting their IDs.

Let me know if you need further clarification or have any more questions!





<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>

<body>
    <div class="container">
    <h1> Registration form</h1>

        <form method="post" action="<?php echo htmlspecialchars($_SERVER['PHP_SELF']); ?>">

            <div class="form_group">
                <label for="firstName">First name:</label>
                <input type="text" id="firstName" name="firstName"
                    value="<?= (isset($_POST['firstName'])) ? strip_tags($_POST['firstName']) : '' ?>"> <span class="error">
                    <?php echo $errors['firstName'] ?? ''; ?>
                </span>
            </div>

            <div class="form_group">
                <label for="lastName">Last name:</label>
                <input type="text" id="lastName" name="lastName"
                    value="<?= (isset($_POST['lastName'])) ? strip_tags($_POST['lastName']) : '' ?>"><span class="error">
                    <?php echo $errors['lastName'] ?? '';  ?>
                </span>
            </div>

            <div class="form_group">
                <label for="email">Email :</label>
                <input type="text" id="email" name="email"
                    value="<?= (isset($_POST['email'])) ? strip_tags($_POST['email']) : '' ?>">
                <span class="error">
                    <?php echo $errors['email'] ?? ''; ?>
                </span>
            </div>

            <div class="form_group">
                <label for="phone">Phone No. :</label>
                <input type="text" id="phone" name="phone"
                    value="<?= (isset($_POST['phone'])) ? strip_tags($_POST['phone']) : '' ?>"><span class="error">
                    <?php echo $errors['phone'] ?? ''; ?>
                </span>
            </div>

            <div class="form_group">
                <label for="address">Address :</label>
                <textarea name="address" id="address" value=""> <?php if (isset($_POST['address'])) {
                                                                    echo $_POST['address'];
                                                                } ?>
                </textarea>
                <span class="error" onchange="" onclick="">
                    <?php echo $errors['address'] ?? ''; ?>
                </span>
            </div>

            <div class="form_group">
                <label for="country">Country :</label>
                <select name="country" id="country">
                    <option value="">Select Country</option>
                </select>
                <span class="error">
                    <?php echo $errors['country'] ?? ''; ?>
                </span>
            </div>

            <div class="form_group">
                <label for="state">State :</label>
                <select name="state" id="state">
                    <option value="">Select State</option>
                </select>
                <span class="error">
                    <?php echo $errors['state'] ?? ''; ?>
                </span>
            </div>

            <div class="form_group">
                <label for="pincode">Pincode :</label>
                <input type="text" name="pincode" id="pincode"
                    value="<?= (isset($_POST['pincode'])) ? strip_tags($_POST['pincode']) : '' ?>"><span class="error">
                    <?php echo $errors['pincode'] ?? ''; ?>
                </span>
            </div>

            <div class="form_group">
                <label for="password">Password :</label>
                <input type="password" id="password" name="password"
                    value="<?= (isset($_POST['password'])) ? strip_tags($_POST['password']) : '' ?>"><span
                    class="error">
                    <?php echo $errors['password'] ?? ''; ?>
                </span>
            </div>

            <div class="form_group">
                <label for="confirmPass">Confirm Password :</label>
                <input type="password" id="confirmPass" name="confirmPass"
                    value="<?= (isset($_POST['confirmPass'])) ? strip_tags($_POST['confirmPass']) : '' ?>"><span
                    class="error">
                    <?php echo $errors['confirmPass'] ?? '' ?>
                </span>
            </div>

            <div class="form_group">
                <button type="submit">Register</button>
            </div>

            <div class="form_group">
                <p>Already have an account? <a href="./login.php"><span>Login</span></a></p>
            </div>
        </form>
    </div>
</body>

</html>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const countrySelect = document.getElementById('country');
        const stateSelect = document.getElementById('state');
        const selectedCountry = '<?= $_POST['country'] ?? '' ?>';
        const selectedState = '<?= $_POST['state'] ?? '' ?>';
        
        fetch('http://localhost/php/views/registration.php?action=getCountries')
            .then(response => response.json())
            .then(countries => {
                countries.forEach(country => {
                    const option = document.createElement('option');
                    option.value = country.id;
                    option.textContent = country.name;

                    if (country.id === selectedCountry) {
                        option.selected = true;
                    }
                    countrySelect.appendChild(option);
                });

                if (selectedCountry) {
                    fetchStates(selectedCountry, selectedState);
                }
            })
            .catch(error => console.error('Error fetching countries:', error));

        countrySelect.addEventListener('change', function() {
            const countryId = this.value;
            stateSelect.innerHTML = '<option value="">Select State</option>';
            stateSelect.disabled = false;

            if (countryId) {
                fetchStates(countryId);
            }
        });

        function fetchStates(countryId, preselectedState = '') {
            fetch(`http://localhost/php/views/registration.php?action=getStates&country_id=${countryId}`)
                .then(response => response.json())
                .then(states => {
                    states.forEach(state => {
                        const option = document.createElement('option');
                        option.value = state.id;
                        option.textContent = state.name;
                        if (state.id === preselectedState) {
                            option.selected = true;
                        }
                        stateSelect.appendChild(option);
                    });
                })
                .catch(error => console.error('Error fetching states:', error));
        }
    });
</script>
